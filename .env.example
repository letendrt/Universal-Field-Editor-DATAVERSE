# =============================================================================
# Dataverse Universal Field Editor - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# Never commit .env to version control - it contains sensitive credentials!
# Note: The script also supports hardcoded configuration in the file itself
# =============================================================================

# -----------------------------------------------------------------------------
# Dataverse API Configuration (REQUIRED)
# -----------------------------------------------------------------------------

# Your Dataverse API token
# Get this from your Dataverse account under "API Tokens"
DATAVERSE_API_TOKEN=your_api_token_here

# Base URL of your Dataverse instance
# Examples:
# - https://demo.borealisdata.ca (for Borealis demo)
# - https://dataverse.harvard.edu (for Harvard Dataverse)
# - https://your-institution.dataverse.org (for your institution)
DATAVERSE_BASE_URL=https://your-dataverse-url.org


# -----------------------------------------------------------------------------
# CSV File Configuration (REQUIRED)
# -----------------------------------------------------------------------------

# Paths to CSV files containing metadata updates
# Multiple files can be specified, separated by commas
# Each file should correspond to one metadata block (citation, socialscience, etc.)
# Examples:
# - SINGLE FILE: /path/to/metadata.csv
# - MULTIPLE FILES: /path/to/citation.csv,/path/to/socialscience.csv
CSV_FILE_PATHS=/path/to/your/metadata.csv


# -----------------------------------------------------------------------------
# Optional Configuration
# -----------------------------------------------------------------------------

# Dataset lock check timeout (in seconds)
# How long to wait for dataset locks to clear before giving up
# Default: 600 (10 minutes)
LOCK_CHECK_TIMEOUT=600

# Dataset lock check interval (in seconds)
# How often to check if a dataset is still locked
# Default: 10 seconds
LOCK_CHECK_INTERVAL=10

# Enable automatic publishing after metadata updates
# WARNING: Only enable if you want datasets to be automatically published!
# Options: true, false
# Default: false
AUTO_PUBLISH=false

# Publish type when auto-publishing
# Options: major, minor
# - major: Creates a new major version (e.g., 1.0 → 2.0)
# - minor: Creates a new minor version (e.g., 1.0 → 1.1)
# Default: minor
PUBLISH_TYPE=minor

# Log level for script output
# Options: DEBUG, INFO, WARNING, ERROR
# Default: INFO
LOG_LEVEL=INFO

# Output directory for logs
# If not specified, logs go to stdout
# Example: /path/to/logs/
LOG_DIR=


# -----------------------------------------------------------------------------
# Dataverse API Endpoints (Usually Leave as Default)
# -----------------------------------------------------------------------------

# API version endpoint
# Default: /api
# API_ENDPOINT=/api

# Dataset edit metadata endpoint
# Default: /api/datasets/:persistentId/editMetadata
# EDIT_METADATA_ENDPOINT=/api/datasets/:persistentId/editMetadata

# Dataset locks endpoint
# Default: /api/datasets/{dataset_id}/locks
# LOCKS_ENDPOINT=/api/datasets/{dataset_id}/locks


# -----------------------------------------------------------------------------
# Development / Testing Configuration
# -----------------------------------------------------------------------------

# Enable test mode
# When enabled, the script will not make actual API calls
# Useful for testing CSV parsing and field formatting
# Options: true, false
# Default: false
TEST_MODE=false

# Mock API responses for testing
# Path to JSON file containing mock responses
# Example: /path/to/mock_responses.json
MOCK_RESPONSES_FILE=

# Dry run mode
# Logs what would be updated without actually updating
# Options: true, false
# Default: false
DRY_RUN=false


# -----------------------------------------------------------------------------
# CSV Format Configuration
# -----------------------------------------------------------------------------

# CSV delimiter character
# Default: , (comma)
# CSV_DELIMITER=,

# Encoding for CSV files
# Default: utf-8-sig (handles BOM for Excel files)
# CSV_ENCODING=utf-8-sig

# Quote character for CSV
# Default: " (double quote)
# CSV_QUOTECHAR="

# Field separator for multiple values in CSV
# Default: + (plus sign)
# MULTI_VALUE_SEPARATOR=+

# Sub-field separator for compound fields in CSV
# Default: ; (semicolon)
# SUBFIELD_SEPARATOR=;

# Boolean values for CSV fields
# Use these values to indicate true/false in CSV
# TRUE_VALUES=yes,y,true,1
# FALSE_VALUES=no,n,false,0


# -----------------------------------------------------------------------------
# Metadata Block Configuration
# -----------------------------------------------------------------------------

# Default metadata block to use if not specified in CSV
# Options: citation, socialscience, geospatial, etc.
# DEFAULT_METADATA_BLOCK=citation

# Maximum number of metadata updates per batch
# Set to 0 or leave blank for no limit
# MAX_BATCH_UPDATES=0

# Delay between API calls (in seconds)
# Helpful to avoid rate limiting
# API_CALL_DELAY=1


# -----------------------------------------------------------------------------
# Retry Configuration
# -----------------------------------------------------------------------------

# Maximum number of retry attempts for failed API calls
# Default: 3
MAX_RETRIES=3

# Initial delay between retries (in seconds)
# Will double after each retry (exponential backoff)
# Default: 5
RETRY_DELAY=5

# Maximum retry delay (in seconds)
# Default: 60
MAX_RETRY_DELAY=60


# =============================================================================
# Example Configuration
# =============================================================================
# Uncomment and modify the example below as needed
#
DATAVERSE_API_TOKEN=12345678-abcd-1234-efgh-1234567890ab
DATAVERSE_BASE_URL=https://demo.borealisdata.ca
CSV_FILE_PATHS=/data/metadata/citation_updates.csv,/data/metadata/socialscience_updates.csv
AUTO_PUBLISH=false
LOCK_CHECK_INTERVAL=10
LOG_LEVEL=INFO
TEST_MODE=false
# =============================================================================
